<!doctype html>
<html>
  <script type='text/javascript'>
    var canvas = null;
    var img = null;
    var ctx = null;
    var imageReady = false;
    /* ANIMATION VARIABLES */ 
    var frame = 0;
    var tLastUpdate = 0; 
    var dt = 0; 
    const MS_PER_FRAME = 100; 
    const FRAMES_PER_S = 1000/60;  
    /* SPRITE VARIABLES */ 
    var ariel = {
      speed: 1, 
      x: 0, 
      y: 0, 
      height: 42, 
      width: 62, 
      halfWidth: 96/2, 
      nFrames: 8, 
    }; 
    const SIMBA_W = 96; 
    const SIMBA_H = 54; 
    const SIMBA_N = 6; 
    /* SETTING UP PLAYER INPUT */ 
    const upKey = 38; 
    const downKey = 40; 
    const leftKey = 37; 
    const rightKey = 39; 
    var keysDown = {}; 
    addEventListener("keydown", function(e) {
      keysDown[e.keyCode] = true; 
    }, false); 
    addEventListener("keyup", function(e) {
      delete keysDown[e.keyCode];  
    }, false); 
    /* SCRIPT FUNCTIONS */ 
    function onload() {
      canvas = document.getElementById('spriteCanvas');
      ctx = canvas.getContext("2d");
      ariel.x = canvas.width/2; 
      ariel.y = canvas.height/2; 
      img = new Image();
      img.src = 'ariel.png';
      img.onload = loaded();
      resize();
    }
    function loaded() {
        imageReady = true;
        setTimeout(animate, FRAMES_PER_S);
    }
    function resize() {
      var w0 = canvas.width; 
      var h0 = canvas.height; 
      canvas.width = canvas.parentNode.clientWidth;
      canvas.height = canvas.parentNode.clientHeight;
      ariel.x = (canvas.width/w0) * ariel.x; 
      ariel.y = (canvas.height/h0) * ariel.y; 
      redraw();
    }
    function redraw() {
        ctx.fillStyle = '#000000';
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        if (imageReady) {
            ctx.drawImage(img, frame*ariel.width, 0, ariel.width, ariel.height,
                          ariel.x - ariel.halfWidth, ariel.y - ariel.halfWidth, ariel.width, ariel.height);
        }
    }
    var update = function(modifier) {
      if (upKey in keysDown) {
        ariel.y -= ariel.speed * modifier; 
      }
      if (downKey in keysDown) {
        ariel.y += ariel.speed * modifier; 
      }
    }
    function animate() {
        requestAnimationFrame(animate); 
        update(dt/1000); 
        if (dt > MS_PER_FRAME) {
          redraw(); 
          frame++; 
          if (frame >= ariel.nFrames) frame = 0;
          dt = 0; 
        } else 
        {
          dt += Date.now() - tLastUpdate; 
        }
        tLastUpdate = Date.now(); 
    }

  </script>
  </head>

<body onresize='onresize()' onload='onload()' style='position: absolute; padding:0; margin:0; height: 100%; width:100%'>

<canvas id="spriteCanvas"></canvas>

</body>
</html>